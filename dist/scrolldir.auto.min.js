/**
 * scrolldir - Vertical scroll direction in CSS
 * @version v1.3.0
 * @link https://github.com/dollarshaveclub/scrolldir.git
 * @author Patrick Fisher <patrick@pwfisher.com>
 * @license MIT
**/
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t.ScrollDir=t.ScrollDir||{},t.ScrollDir.auto=i())}(this,function(){"use strict";function n(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return new(function(){function s(t){var i=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,s);var e=this;this.setOptions(t),this._historyLength=32,this._historyMaxAge=512,this._thresholdPixels=64,this.enabled=!1,this.onScroll=function(){i.tick()},this.handler=function(t){return e._lastScrollTs=t.timeStamp,e.el_win.requestAnimationFrame(e.onScroll)},this.init(),this.initialized=!0}var t,i,e;return t=s,(i=[{key:"setOptions",value:function(t){this.el&&this.el.removeAttribute(this.ops.attribute),this.ops=function(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(t){var i,e,s;i=n,s=o[e=t],e in i?Object.defineProperty(i,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[e]=s})}return n}({off:!1,dir:"down",el:"html",win:"window",onChange:function(){},attribute:"data-scrolldir"},this.ops||{},t),this.enabled=!1,this.dir="down"===this.ops.dir?"down":"up",this.el_body=document.body,this.el="html"===this.ops.el?document.documentElement:this.getElem(this.ops.el),this.el_win="window"===this.ops.win?window:this.getElem(this.ops.win),this._last={dir:null,enabled:null},this._history=Array(this._historyLength),this._pivot=this.el_win.scrollY||this.el_win.pageYOffset,this._lastScrollTs=0,this._pivotTime=0,this.initialized&&this.init()}},{key:"change",value:function(){"function"==typeof this.ops.onChange&&this.ops.onChange(this.dir,this.enabled,this.ops.attribute)}},{key:"init",value:function(){this.ops.off?this.disable():this.enable()}},{key:"getElem",value:function(t){return t&&1===t.nodeType?t:"string"==typeof t?document.querySelector(t):null}},{key:"update",value:function(t){(t||this.enabled!==this._last.enabled||this.dir!==this._last.dir)&&(this._last.dir=this.dir,this._last.enabled=this.enabled,this.el.setAttribute(this.ops.attribute,this.enabled?this.dir:"off"),this.change())}},{key:"enable",value:function(){this.enabled||this.el_win.addEventListener("scroll",this.handler),this.enabled=!0,this.update()}},{key:"disable",value:function(){this.enabled&&this.el_win.addEventListener("scroll",this.handler),this.enabled=!1,this.update()}},{key:"tick",value:function(){var t=this.el_win.scrollY||this.el_win.pageYOffset,i=this._lastScrollTs,e="down"===this.dir?Math.max:Math.min,s=this.el_body.scrollHeight-this.el_win.innerHeight;if(t=Math.max(0,t),t=Math.min(s,t),this._history.unshift({y:t,t:i}),this._history.pop(),t===e(this._pivot,t))return this._pivotTime=i,void(this._pivot=t);var n=i-this._historyMaxAge;if(n>this._pivotTime){this._pivot=t;for(var o=0;o<this._historyLength&&(this._history[o]&&!(this._history[o].t<n));o+=1)this._pivot=e(this._pivot,this._history[o].y)}Math.abs(t-this._pivot)>this._thresholdPixels&&(this._pivot=t,this._pivotTime=i,this.dir="down"===this.dir?"up":"down",this.update())}}])&&n(t.prototype,i),e&&n(t,e),s}())});